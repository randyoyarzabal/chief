# Chief v3.1.4-dev Release Notes

## ðŸš€ What's New

### ðŸ”§ SSH Key Loading Improvements

- **Fixed**: SSH key loading on Linux systems - resolved "Could not open a connection to your authentication agent" error
- **Fixed**: Platform detection for Linux distributions (Red Hat, Ubuntu, CentOS, Rocky, etc.) using robust `uname` detection
- **Improved**: SSH agent detection and startup logic for all Linux distributions
- **Simplified**: SSH agent management using standard `eval "$(ssh-agent -s)"` approach
- **Enhanced**: `chief.reload` now properly reloads SSH keys if `CHIEF_CFG_SSH_KEYS_PATH` is configured
- **Added**: `chief.ssh_status` function to diagnose SSH agent and key loading issues
- **Improved**: Clean output formatting matching macOS behavior - no verbose success/failure messages
- **Enhanced**: SSH key loading supports multiple file patterns:
  - `*.key` (Chief preferred naming)
  - `*.private` (legacy support)
  - Standard SSH keys (`id_rsa`, `id_ed25519`, etc.) are automatically used by SSH clients
- **Fixed**: SSH agent reuse - existing agents are properly detected and reused across `chief.reload` calls
- **Removed**: Overcomplicated SSH environment file management in favor of simpler approach

## ðŸ“‹ Upgrade Notes

### For Users

- **SSH Key Loading**: The `CHIEF_CFG_SSH_KEYS_PATH` feature now works reliably on all Linux distributions (Red Hat, Ubuntu, CentOS, Rocky, Debian, Fedora, etc.)
- **Platform Support**: Automatic detection of Linux systems regardless of distribution name
- **New Command**: Use `chief.ssh_status` to check SSH agent status and diagnose key loading issues
- **Clean Output**: SSH key loading now provides clean, consistent output across all platforms
- **Key Naming**: Ensure custom SSH keys use `.key` or `.private` extensions for automatic loading

### For Developers

- **Platform Detection**: Uses `$(uname) == "Linux"` for robust Linux detection instead of distribution-specific checks
- **SSH Agent Management**: Simplified using standard `eval "$(ssh-agent -s)"` approach 
- **Cross-Platform Consistency**: Clean output formatting consistent between macOS and Linux
- **Error Handling**: Improved error reporting with verbose mode for debugging

---

**Full details**: See [release-notes](../release-notes/) directory for complete changelog and version history.
